<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src\js\webDictionary.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/ColorSwitcher.html">ColorSwitcher</a></li>
                                <li><a href="../classes/Comment.html">Comment</a></li>
                                <li><a href="../classes/comment.js_anonymous.html">comment.js_anonymous</a></li>
                                <li><a href="../classes/Data.html">Data</a></li>
                                <li><a href="../classes/Global.html">Global</a></li>
                                <li><a href="../classes/helpInfo.js_anonymous.html">helpInfo.js_anonymous</a></li>
                                <li><a href="../classes/IO.html">IO</a></li>
                                <li><a href="../classes/io.js_anonymous.html">io.js_anonymous</a></li>
                                <li><a href="../classes/JQuery.html">JQuery</a></li>
                                <li><a href="../classes/ManualMarkup.html">ManualMarkup</a></li>
                                <li><a href="../classes/manualMarkup.js_anonymous.html">manualMarkup.js_anonymous</a></li>
                                <li><a href="../classes/navbar.js_anonymous.html">navbar.js_anonymous</a></li>
                                <li><a href="../classes/Regex.html">Regex</a></li>
                                <li><a href="../classes/switcher.js_anonymous.html">switcher.js_anonymous</a></li>
                                <li><a href="../classes/tagRegex.js_anonymous.html">tagRegex.js_anonymous</a></li>
                                <li><a href="../classes/UI.html">UI</a></li>
                                <li><a href="../classes/ui.js_anonymous.html">ui.js_anonymous</a></li>
                                <li><a href="../classes/Util.html">Util</a></li>
                                <li><a href="../classes/utilities.js_anonymous.html">utilities.js_anonymous</a></li>
                                <li><a href="../classes/WebDictionary.html">WebDictionary</a></li>
                                <li><a href="../classes/webDictionary.js_anonymous.html">webDictionary.js_anonymous</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/comment.js.html">comment.js</a></li>
                                <li><a href="../modules/data.js.html">data.js</a></li>
                                <li><a href="../modules/helpInfo.js.html">helpInfo.js</a></li>
                                <li><a href="../modules/io.js.html">io.js</a></li>
                                <li><a href="../modules/markus.js.html">markus.js</a></li>
                                <li><a href="../modules/navbar.js.html">navbar.js</a></li>
                                <li><a href="../modules/reference.js.html">reference.js</a></li>
                                <li><a href="../modules/switcher.js.html">switcher.js</a></li>
                                <li><a href="../modules/tagRegex.js.html">tagRegex.js</a></li>
                                <li><a href="../modules/ui.js.html">ui.js</a></li>
                                <li><a href="../modules/utilities.js.html">utilities.js</a></li>
                                <li><a href="../modules/webDictionary.js.html">webDictionary.js</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src\js\webDictionary.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
webDictionary.js file. This file contains the webDictionary definitions
@module webDictionary.js
*/

/**
The class that holds the variables and functions created in the namespace of this file.
The constrcutor of this object is only called once, because it is an anonymous function
@class webDictionary.js_anonymous
@constructor
@param {Object}  _m a reference to the Markus Configuration Object is passed
**/
(function(_m) {

    /**
     Function called before search. It hides the iframe of
     the dictionary and shows the spinHolder.

     @method _jobBeforeSearch
     @param {Object} dictionary The dictionary Object
     */
    var _jobBeforeSearch = function(dictionary) {
        $(dictionary.iframe).hide();
        $(dictionary.spinHolder).show();
    };

    /**
     Searches the dictionary for itself.

     @method searchDictionary
     @param {Object} dictionary the passed dictionary parameter
     */
    var searchDictionary = function(dictionary) {
        dictionary.search(dictionary);
    };

    /**
     All dictionaries are held in this one object
     @property dictionaries
     @type {Object}
     */
    var dictionaries = {};

    //Both local and markus referenced dictionary are set to new Object
    /**
    @property webDict
    @type {WebDictionary}
    */
    var webDict = _m.webDict = {};

    /**
     Define a search function. Uses the webDict object to open the URL
     specified in the dictionary object.
     @method _search
     @param {Object} dictionary the dictionary object
     */
    var _search = function(dictionary) {
        webDict.openURL(dictionary, dictionary.src.replace(dictionary.param, encodeURI($(dictionary.input).val())));
    };

    /**
     Web dictionary module handles the interaction between tab, input, spinner and iframe interactions.
    It does basic iframe URL construction from input value.
    @class WebDictionary
    */

    /**
     Resizes the passed object to match the window height.

     @method resize
     @param {Object} obj HTML object that has to match the window height
     */
    webDict.resize = function(obj) {
        $(obj).height($(window).height());
    };

    /**
     Sets all the parameters in a dictionary object to open the passed URL.

     @method openURL
     @param {Object} dictionary the passed dictionary object
     @param {String} url the URL string
     */
    webDict.openURL = function(dictionary, url) {
        //first call the preparation function before search
        _jobBeforeSearch(dictionary);

        //set the src attribute of the iframe to the provided URL
        $(dictionary.iframe).attr(&#x27;src&#x27;, url);

        //If the exportURL exists and is not a zero-length string, set the
        //href attribute of the exportLink to the exportURL.
        //Otherwise, set the href attribute of the exportLink to the passed URL
        if (dictionary.exportURL &amp;&amp; dictionary.exportURL.length &gt; 0) {
            $(dictionary.exportLink).attr(&#x27;href&#x27;, dictionary.exportURL.replace(dictionary.param, encodeURI($(dictionary.input).val())));
        } else {
            $(dictionary.exportLink).attr(&#x27;href&#x27;, url);
        }
    };

    /**
     Searches through all dictionaries by looping through the object that
     holds all defined dictionaries by key.

     @method searchAllDictionary
     */
    webDict.searchAllDictionary = function() {
        for (var key in dictionaries) {
            console.log(dictionaries[key]);
            searchDictionary(dictionaries[key]);
        }
    };

    /**
     Returns the specified webDictionary referenced by its name

     @method getDictionary
     @param {String} web_dictionary_name the name of the webDictionary you want to get
     @return {Object} the referenced webDictionary object
     */
    webDict.getDictionary = function(web_dictionary_name) {
        return dictionaries[web_dictionary_name];
    };

    /**
     Registers a new Web Dictionary

     @method registWebDictionary
     */
    webDict.registWebDictionary = function() {
        //Setting position for the web dictionary container
        $(&#x27;.web-dictionary-container&#x27;).affix({
            offset: {
                top: 0,
                bottom: function() {
                    return (this.bottom = $(&#x27;.footer&#x27;).outerHeight(true));
                }
            }
        });

        //For each of the web dictionaries convert it into a dictionary object
        $(&quot;.web-dictionary[web-dictionary-name]&quot;).each(function() {
            var obj = $(this),
                dictionary_name = $(this).attr(&quot;web-dictionary-name&quot;), dictionary, web_dictionary_input, web_dictionary_button, web_dictionary_iframe, web_dictionary_spinHolder, web_dictionary_exportURL;

            //initializing the Dictionary object
            dictionaries[dictionary_name] = dictionary = {
                dictionary_name: dictionary_name,
                holder: obj,
                iframe: null,
                spinHolder: null,
                exportLink: null,
                idRegex: $(this).attr(&quot;web-dictionary-id-regex&quot;),
                idSrc: $(this).attr(&quot;web-dictionary-id-src&quot;),
                input: null,
                src: $(this).attr(&quot;web-dictionary-src&quot;),
                exportURL: $(this).attr(&quot;web-dictionary-exportURL&quot;),
                search: null,
                param: $(this).attr(&quot;web-dictionary-param&quot;)
            };

            //Use eval to set the web_dictionary_search, this should be a function
            var web_dictionary_search = eval($(this).attr(&quot;web-dictionary-search&quot;));
            console.log(web_dictionary_search);

            //Check if we got the right type of data. If not, try to find the function
            //by name. If that fails, assign the search function to the one
            //defined above. (_search)
            if (typeof (web_dictionary_search) == &quot;function&quot;) {
                dictionary.search = web_dictionary_search;
            } else if (web_dictionary_search != null &amp;&amp; web_dictionary_search.length &gt; 0) {
                dictionary.search = _m.util.searchFunctionByName(web_dictionary_search, window);
            } else {
                dictionary.search = _search;
            }

            //Assigns the Web Dictionary input and gives it an event handler
            //that searches the dictionary on change
            web_dictionary_input = obj.find(&quot;.web-dictionary-input&quot;);
            if (web_dictionary_input.length &gt; 0) {
                dictionary.input = web_dictionary_input[0];
                $(dictionary.input).on(&#x27;change&#x27;, function() {
                    searchDictionary(dictionary);
                    // dictionary.openURL();
                });
            }

            //Set the iframe variable
            web_dictionary_iframe = obj.find(&quot;.web-dictionary-iframe&quot;);
            //Set the exportURL variable
            web_dictionary_exportURL = obj.find(&quot;.web-dictionary-exportURL&quot;);

            //If there is actually a non zero-length exportURL. Assign the
            //it to dictionary.exportLink.
            if (web_dictionary_exportURL.length &gt; 0) {
                dictionary.exportLink = web_dictionary_exportURL[0];
            }

            //If there is actually a non zero-length iframe. Assign the
            //it to dictionary.iframe.
            if (web_dictionary_iframe.length &gt; 0) {
                dictionary.iframe = web_dictionary_iframe[0];
            }

            //Assigns the spinHolder
            web_dictionary_spinHolder = obj.find(&quot;.web-dictionary-spinHolder&quot;);

            //If there are multiple, assign the first one
            if (web_dictionary_spinHolder.length &gt; 0) {
                dictionary.spinHolder = web_dictionary_spinHolder[0];
            }

        });

        /**
         Debounces the specified function call.

         @for webDictionary.js_anonymous
         @method debouncer
         @param  {Function} func    the function you called and want to be debounced
         @param  {int} timeout the timeout of the debounce
         */
        var debouncer = function(func, timeout) {
            var timeoutID;
            timeout = timeout || 200;
            return function() {
                var scope = this ,
                    args = arguments;
                clearTimeout(timeoutID);
                timeoutID = setTimeout(function() {
                    func.apply(scope, Array.prototype.slice.call(args));
                }, timeout);
            };
        };

        /**
         * Defines what happens when you click on a tab. It shows the specified
         * tab, hides all webDicts, shows the correct one and triggers the
         * resetSize event.
         * @return {[type]} [description]
         */
        $(&quot;.web-dictionary-tab&quot;).on(&quot;click&quot;, function() {
            //show the current tab and get the dictionary name from the tab
            $(this).tab(&quot;show&quot;);
            var web_dictionary_name = $(this).attr(&quot;web-dictionary-name&quot;);
            // var index = $(&quot;.reference&quot;).find(&quot;a&quot;).index(this);

            //hide all web dictionaries and show only the correct one. trigger
            //a resetsize event
            $(&quot;.web-dictionary&quot;).hide();
            $(&quot;.web-dictionary[web-dictionary-name=&#x27;&quot; + web_dictionary_name + &quot;&#x27;]&quot;).show(function() {
                $(this).find(&quot;.web-dictionary-iframe&quot;).trigger(&quot;resetSize&quot;);
            });

        });


        /**
         * ResetSize handler for the iframe of the Web Dictionary
         */
        $(&#x27;.web-dictionary-iframe&#x27;).on(&#x27;resetSize&#x27;, function() {
            webDict.resize($(this));
            // $(this).height($(window).height() -$(&quot;#content&quot;).offset().top - $(&quot;#buttonsRow&quot;).outerHeight()-100);
        });

        /**
         * ResetSize handler for the container of the Web Dictionary
         */
        $(&#x27;.web-dictionary-container&#x27;).on(&#x27;resetSize&#x27;, function() {
            $(this).width($(this).parent().width());
        });

        /**
         * Affix handler for the container of the Web Dictionary
         */
        $(&#x27;.web-dictionary-container&#x27;).on(&#x27;affixed.bs.affix&#x27;, function() {
            $(this).trigger(&quot;resetSize&quot;);
        });

        /**
         * Load handler for the iframe of the Web Dictionary. Handles initializing
         */
        $(&#x27;.web-dictionary-iframe&#x27;).on(&#x27;load&#x27;, function() {
            var index = $(&quot;.web-dictionary&quot;).find(&quot;iframe&quot;).index(this);
            $(&quot;.web-dictionary&quot;).find(&quot;.web-dictionary-spinHolder&quot;).eq(index).hide();
            $(this).show();
            $(this).trigger(&#x27;resetSize&#x27;);
        });

        //Trigger resetSize
        $(&#x27;.web-dictionary-iframe&#x27;).trigger(&#x27;resetSize&#x27;);

        //When the window resizes, send a resize event to the Web Dictionary iframe
        //and container too. But debounce the events to prevent too many events
        //reaching the element.
        $(window).on(&quot;resize&quot;, debouncer(function() {
            $(&#x27;.web-dictionary-iframe&#x27;).trigger(&quot;resetSize&quot;);
            $(&#x27;.web-dictionary-container&#x27;).trigger(&quot;resetSize&quot;);
        }));

    };


})(markus);

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
